"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2600],{92600:function(e,t,n){n.r(t),n.d(t,{LcGrid2:function(){return yt},LcGrid2Component:function(){return vt}});var i={};n.r(i),n.d(i,{be:function(){return x},en:function(){return E},id:function(){return z},kk:function(){return B},ru:function(){return j},tr:function(){return A},tt:function(){return k},uk:function(){return T},uz:function(){return F}}),n(81299),n(12419),n(47941),n(82526),n(38880),n(57658),n(49337);var r=n(93433),o=n(29439),s=n(15671),a=n(43144),c=n(97326),l=n(60136),u=n(82963),d=n(61120),f=n(4942),m=(n(92222),n(41539),n(25387),n(2490),n(72608),n(69720),n(91038),n(78783),n(21249),n(57640),n(9924),n(57327),n(88449),n(59849),n(15581),n(34514),n(54747),n(87363)),p=n(96486),g=n(14134),h=n(63487),v=n(25601),y=n(24695),Z=(n(9653),n(5834)),S=n(32805),R=n(34536),I=n(72150),w=n(15925),b=n(85893);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=(0,g.Z)("lc-grid2-editor-widget"),L=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"state",{GridEditorWidget:null}),(0,f.Z)((0,c.Z)(e),"_isMounted",!1),(0,f.Z)((0,c.Z)(e),"setWidget",(function(){(0,R.hs)("GridEditorWidget").then((function(e){return(null==e?void 0:e.GridEditorWidget)||null})).then((function(t){e._isMounted&&e.setState({GridEditorWidget:t})}))})),e}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.setWidget()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props.elementType,t=this.state.GridEditorWidget;return t?(0,b.jsx)("div",{className:O({type:e})(),children:(0,b.jsx)(t,D({},this.props))}):null}}]),r}(m.Component),M=function(e){return e.Row="row",e.Column="column",e}({}),C=function(e){return e.Add="add",e.Edit="edit",e.Delete="delete",e}({}),x={"Высота строки":"Высота строки","Ширина колонки":"Ширина колонки"},E={"Высота строки":"Row height","Ширина колонки":"Column width"},z={"Высота строки":"Row height","Ширина колонки":"Column width"},B={"Высота строки":"Высота строки","Ширина колонки":"Ширина колонки"},j={"Высота строки":"Высота строки","Ширина колонки":"Ширина колонки"},A={"Высота строки":"Row height","Ширина колонки":"Column width"},k={"Высота строки":"Высота строки","Ширина колонки":"Ширина колонки"},T={"Высота строки":"Высота строки","Ширина колонки":"Ширина колонки"},F={"Высота строки":"Высота строки","Ширина колонки":"Ширина колонки"};var H=(0,g.Z)("lc-grid2-editor-block"),Y=["bottom","bottom-start","bottom-end"],X=["right-start","right","right-end"],G=(0,S.ZP)(i),N={columnWidth:G("Ширина колонки",{context:"Надпись для настройки ширины столбца сетки"}),rowHeight:G("Высота строки",{context:"Надпись для настройки высоты строки сетки"})},U=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"state",{isCellSmall:!1}),(0,f.Z)((0,c.Z)(e),"resizeObserver",new ResizeObserver((function(t){var n=t[0],i=null==n?void 0:n.borderBoxSize[0];i&&e.checkCellSize(i)}))),(0,f.Z)((0,c.Z)(e),"cell",null),(0,f.Z)((0,c.Z)(e),"handleValueChange",(function(t){var n=e.props,i=n.type,r=n.index,o=n.sectionId;e.lcChannel.send(R.TV.EDIT_GRID,{action:C.Edit,elementIndex:r,elementType:i,sectionId:o,value:t})})),(0,f.Z)((0,c.Z)(e),"handleAddBefore",(function(){e.handleAdd(e.props.index)})),(0,f.Z)((0,c.Z)(e),"handleAddAfter",(function(){e.handleAdd(e.props.index+1)})),(0,f.Z)((0,c.Z)(e),"handleAdd",(function(t){var n=e.props,i=n.type,r=n.sectionId,o=n.value;e.lcChannel.send(R.TV.EDIT_GRID,{action:C.Add,elementIndex:t,elementType:i,sectionId:r,value:o})})),(0,f.Z)((0,c.Z)(e),"handleDelete",(function(){var t=e.props,n=t.type,i=t.index,r=t.sectionId;e.lcChannel.send(R.TV.EDIT_GRID,{action:C.Delete,elementIndex:i,elementType:n,sectionId:r})})),(0,f.Z)((0,c.Z)(e),"checkCellSize",(function(t){var n=t.inlineSize,i=t.blockSize,r=e.props,o=r.type,s=0===r.index?157:117,a=o===M.Column&&n<s,c=o===M.Row&&i<s;e.setState({isCellSmall:a||c})})),e}return(0,a.Z)(r,[{key:"lcChannel",get:function(){return window._LC_.messageChannel}},{key:"componentDidMount",value:function(){var e=this.props.cellKey;this.cell=document.querySelector('[data-grid-cell="'.concat(e,'"]')),this.cell&&this.resizeObserver.observe(this.cell)}},{key:"componentWillUnmount",value:function(){this.cell&&this.resizeObserver.unobserve(this.cell)}},{key:"render",value:function(){var e=this.props,t=e.canBeDeleted,n=e.gridArea,i=e.isVisible,r=e.type,o=e.value,s=this.state.isCellSmall,a={gridArea:n},c=r===M.Column;return(0,b.jsxs)("div",{className:H({type:r,small:s,visible:i})(),style:a,children:[(0,b.jsx)("div",{className:H("ellipsis")(),children:"..."}),(0,b.jsxs)("div",{className:H("content")(),children:[(0,b.jsx)(I.e,{className:H("plus")(),icon:w.T.Plus,onClick:this.handleAddBefore}),(0,b.jsx)(L,{canBeDeleted:t,elementType:r,inputLabel:c?N.columnWidth:N.rowHeight,onChange:this.handleValueChange,onDelete:this.handleDelete,popupDirections:c?Y:X,value:o}),(0,b.jsx)(I.e,{className:H("plus")(),icon:w.T.Plus,onClick:this.handleAddAfter})]})]})}}]),r}(m.PureComponent);var W=(0,g.Z)("lc-grid2-editor-cell"),_=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){return(0,s.Z)(this,r),i.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){return(0,b.jsx)(b.Fragment,{children:this.getCells()})}},{key:"getCells",value:function(){for(var e=this.props,t=e.hasColumnGap,n=e.hasRowGap,i=e.isVisible,r=e.columns,o=e.rows,s=e.sectionId,a=[],c=0;c<o.length;c++)for(var l=c+1,u=c+2,d=c===o.length-1,f=0;f<r.length;f++){var m=f+1,p=f+2,g=f===r.length-1,h="".concat(l," / ").concat(m," / ").concat(u," / ").concat(p),v="grid-".concat(s,"-cell-").concat(c,"-").concat(f),y={visible:i,"last-column":g,"last-row":d,"with-column-gap":t,"with-row-gap":n};a.push((0,b.jsx)("div",{style:{gridArea:h},className:W(y)(),"data-grid-cell":v},v))}return a}}]),r}(m.PureComponent);var K=(0,g.Z)("lc-grid2-editor"),V=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"state",{isEditor:!1}),e}return(0,a.Z)(r,[{key:"sectionId",get:function(){var e;return(null===(e=this.props.attrs)||void 0===e?void 0:e["data-section-id"])||""}},{key:"componentDidMount",value:function(){this.setState({isEditor:Z.h})}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.rowGapRaw,i=e.columnGapRaw,r=e.columns,o=e.rows,s=e.isStructureVisible,a=this.state.isEditor,c=this.hasGap(n),l=this.hasGap(i);return a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:K("overlay",{visible:t})()}),s&&(0,b.jsx)(_,{columns:r,hasColumnGap:l,hasRowGap:c,isVisible:s,rows:o,sectionId:this.sectionId}),this.getBlocks(r,M.Column),this.getBlocks(o,M.Row)]}):null}},{key:"getBlocks",value:function(e,t){for(var n=this.props.isActive,i=this.sectionId,r=[],o=e.length>1,s=0;s<e.length;s++){var a=t===M.Column,c=a?0:s,l=a?s:0,u="grid-".concat(i,"-").concat(t,"-block-").concat(s),d="grid-".concat(i,"-cell-").concat(c,"-").concat(l),f=a?"1 / ".concat(s+1," / 2 / ").concat(s+2):"".concat(s+1," / 1 / ").concat(s+2," / 2");r.push((0,b.jsx)(U,{canBeDeleted:o,cellKey:d,gridArea:f,index:s,isVisible:n,sectionId:i,type:t,value:e[s]},u))}return r}},{key:"hasGap",value:function(e){return Boolean(Number(e.value))}}]),r}(m.PureComponent),q=n(14061),J=n(50439),$=n(8729),Q=n(30633),ee=n(46127),te=n(47330),ne=(n(29254),n(23157),n(17610));function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var re=(0,g.Z)("lc-link-wrapper"),oe=n(7833),se=(n(74916),n(4723),n(26699),n(32023),n(68216),n(79433),n(62912)),ae=n(32444);function ce(e){return Boolean(e)&&(null==e?void 0:e.unit)!==se.fb.Auto}function le(e){return!/\d/.test(e)}function ue(e,t){return{offsetX:e.pageX-t.x,offsetY:e.pageY-t.y}}function de(e,t){return e.endsWith("px")?parseFloat(e):t}function fe(e){var t=e.previousRect,n=e.offsetX,i=e.offsetY,r=e.width,o=e.height;return t?r&&o?new DOMRect(t.x+n,t.y+i,de(r,t.width),de(o,t.height)):new DOMRect(t.x+n,t.y+i,t.width,t.height):new DOMRect}n(77601),n(44048),n(27852);var me=function(e){return e.Left="left",e.Right="right",e.Line="line",e}({}),pe=function(e){return e.Top="top",e.Bottom="bottom",e.Middle="middle",e.Line="line",e}({}),ge=function(e){return e.Line="line",e.Button="button",e}({});var he=(0,g.Z)("lc-grid2-item-resize-control"),ve=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"getLineModificator",(function(){var t=e.props,n=t.x,i=t.y,r=n===me.Line?i:n;return(0,f.Z)({},r,!0)})),(0,f.Z)((0,c.Z)(e),"getButtonModificator",(function(){var t=e.props,n=t.x,i=t.y;return(0,f.Z)({},"".concat(i,"-").concat(n),!0)})),(0,f.Z)((0,c.Z)(e),"handleMouseDown",(function(t){var n=e.props;(0,n.onMouseDown)(t,{x:n.x,y:n.y})})),e}return(0,a.Z)(r,[{key:"render",value:function(){return this.props.type===ge.Line?(0,b.jsx)("div",{className:he("line")(this.getLineModificator())(),onMouseDown:this.handleMouseDown}):(0,b.jsx)("div",{className:he("wrapper")(this.getButtonModificator())(),onMouseDown:this.handleMouseDown,children:(0,b.jsx)("div",{className:he("element")()})})}}]),r}(m.Component),ye=function(e){return e.Resize="resize",e.Move="move",e}({}),Ze=(0,f.Z)({},se.bE.LcImageLpc,(function(e){var t=e.parent,n=e.nextWidth,i=e.nextHeight,r=t.querySelector(".lc-image-lpc");r&&(!le(n)&&r.classList.contains("lc-image-lpc_width-auto")&&r.classList.remove("lc-image-lpc_width-auto"),!le(i)&&r.classList.contains("lc-image-lpc_height-auto")&&r.classList.remove("lc-image-lpc_height-auto"))})),Se=15,Re=[se.bE.LcButtonComponent,se.bE.LcImageLpc,se.bE.LcIframe,se.bE.LcMap,se.bE.LcGrid2],Ie=[{type:ge.Button,y:pe.Top,x:me.Left},{type:ge.Button,y:pe.Bottom,x:me.Left},{type:ge.Button,y:pe.Top,x:me.Right},{type:ge.Button,y:pe.Bottom,x:me.Right},{type:ge.Line,y:pe.Top,x:me.Line},{type:ge.Line,y:pe.Bottom,x:me.Line},{type:ge.Line,y:pe.Line,x:me.Left},{type:ge.Line,y:pe.Line,x:me.Right}],we=[{type:ge.Button,y:pe.Middle,x:me.Left},{type:ge.Button,y:pe.Middle,x:me.Right},{type:ge.Line,y:pe.Line,x:me.Left},{type:ge.Line,y:pe.Line,x:me.Right}],be=[se.fb.Auto,se.fb.Calc,se.fb.Pixel],Pe=n(83616);var De=(0,g.Z)("lc-grid2-item-resize-logic-popup"),Oe=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"recalculatedWidthAndHeight",(function(t,n){return{width:e.recalculateSize("width",t),height:e.recalculateSize("height",n)}})),(0,f.Z)((0,c.Z)(e),"recalculateSize",(function(t,n){var i,r,o=e.props,s=o.getDragStartItemRect,a=o.sizes,c=o.getItemCellDimensions,l=null===(i=s())||void 0===i?void 0:i[t],u=a[t];if(l===n||(r=n,Number.isNaN(Number(r))))return(0,oe.I)(u);var d,f=be.includes(u.unit)?se.fb.Pixel:u.unit,m=c()||{};u.value&&l&&"rem"===u.unit&&(d=l/Number(u.value));var p=(0,Pe.Jb)(n,f,m[t],d);return(0,oe.I)(p)})),e}return(0,a.Z)(r,[{key:"render",value:function(){var e=(0,this.props.getDragMoveItemRect)()||{},t=e.width,n=e.height;if(!t||!n)return null;var i=this.recalculatedWidthAndHeight(t,n),r=i.width,o=i.height;return(0,b.jsxs)("div",{className:De(),children:[(0,b.jsxs)("span",{children:["В: ",o]}),(0,b.jsxs)("span",{children:["Ш: ",r]})]})}}]),r}(m.Component);var Le=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"resizeButtonPosition",null),(0,f.Z)((0,c.Z)(e),"sizesPopupRef",m.createRef()),(0,f.Z)((0,c.Z)(e),"canElementResizeHeight",(function(){var t=e.props.type;return!!t&&Re.includes(t)})),(0,f.Z)((0,c.Z)(e),"getElementOffsetAndDimensionsWithLimitations",(function(t,n){var i=e.props,r=i.getParent,o=i.getDragStartItemRect,s=r(),a=o();if(!a||!e.resizeButtonPosition||!s)return{width:"0px",height:"0px",elementOffsetX:0,elementOffsetY:0};var c=e.resizeButtonPosition.x===me.Left?-1:1,l="".concat(a.width+t*c,"px"),u=e.resizeButtonPosition.y===pe.Top?-1:1,d="".concat(a.height+n*u,"px"),f=a.width-Se,m=a.height-Se,p=0,g=0;return e.resizeButtonPosition.y===pe.Bottom&&n<-m&&(d="".concat(Se,"px")),e.resizeButtonPosition.y!==pe.Middle&&e.resizeButtonPosition.y!==pe.Line||(d=s.style.height),e.resizeButtonPosition.y===pe.Top&&(n>m?(g=m,d="".concat(Se,"px")):g=n),e.resizeButtonPosition.x===me.Right&&t<-f&&(l="".concat(Se,"px")),e.resizeButtonPosition.x===me.Left&&(t>f?(l="".concat(Se,"px"),p=f):p=t),e.resizeButtonPosition.x===me.Line&&(l=s.style.width),{width:l,height:d,elementOffsetX:p,elementOffsetY:g}})),(0,f.Z)((0,c.Z)(e),"handleResizeMouseDown",(function(t,n){t.stopPropagation();var i=e.props,r=i.getParent,o=i.setDragStartItemRect,s=i.setDragStart,a=i.initializeMagnetismData,c=i.area,l=i.setItemCellDimensions,u=r();if(u){var d=u.getBoundingClientRect();o(d),s(t.pageX,t.pageY),l(c),a(d),e.resizeButtonPosition=n;var f=u.style,m=f.marginRight,p=f.marginLeft,g=f.marginBottom,h=f.marginTop,v=u.getBoundingClientRect(),y=v.width,Z=v.height;u.style.position="absolute",!h&&g?u.style.top="calc(100% - ".concat(g," - ").concat(Z,"px)"):h||g||(u.style.top="calc(50% - ".concat(Z/2,"px)")),!p&&m?u.style.left="calc(100% - ".concat(m," - ").concat(y,"px)"):p||m||(u.style.left="calc(50% - ".concat(y/2,"px)")),u.parentNode.style.position="relative",document.addEventListener("mousemove",e.handleResizeMouseMove),document.addEventListener("mouseup",e.handleResizeMouseUp)}})),(0,f.Z)((0,c.Z)(e),"handleResizeMouseMove",(function(t){t.preventDefault();var n=e.props,i=n.getParent,r=n.getElementOffsetAndSizeWithMagnetism,o=n.setElementOffset,s=n.setElementDimensions,a=n.getDragStart,c=n.onMouseMove,l=n.getDragStartItemRect,u=n.drawMagnetismLines,d=n.setDragMoveItemRect,f=i();if(f&&e.resizeButtonPosition){var m=ue(t,a()),p=m.offsetX,g=m.offsetY,h=e.getElementOffsetAndDimensionsWithLimitations(p,g),v=h.width,y=h.height,Z=r({elementOffsetX:h.elementOffsetX,elementOffsetY:h.elementOffsetY,width:v,height:y,dragType:ye.Resize,dragStartItemRect:l(),resizeButtonPosition:e.resizeButtonPosition}),S=Z.elementOffsetX,R=Z.elementOffsetY,I=Z.width,w=Z.height;o(S,R),s(I,w);var b=fe({previousRect:l(),offsetX:S,offsetY:R,width:I,height:w});u(b);var P=Ze[e.props.type||""];P&&P({parent:f,nextWidth:I,nextHeight:w}),d(b),e.updateSizesPopup(),c()}})),(0,f.Z)((0,c.Z)(e),"updateSizesPopup",(function(){var t;e.sizesPopupRef.current&&(null===(t=e.sizesPopupRef.current)||void 0===t||t.forceUpdate())})),(0,f.Z)((0,c.Z)(e),"resetWidthAndHeightValuesPopup",(function(){(0,e.props.setDragMoveItemRect)({width:0,height:0})})),(0,f.Z)((0,c.Z)(e),"handleResizeMouseUp",(function(){document.removeEventListener("mousemove",e.handleResizeMouseMove),document.removeEventListener("mouseup",e.handleResizeMouseUp);var t=e.props,n=t.getParent,i=t.savePosition,r=n();if(!r)return i(null,{dragType:ye.Resize,nothingChanged:!0}),void e.updateSizesPopup();i(r.getBoundingClientRect(),{isAutoHeight:le(r.style.height),isAutoWidth:le(r.style.width),dragType:ye.Resize}),e.updateSizesPopup(),r.style.position="",r.style.top="",r.style.left="",r.parentNode.style.position=""})),e}return(0,a.Z)(r,[{key:"render",value:function(){var e=this,t=this.props,n=t.enableAnalyticsMode,i=t.isSectionSelected,r=t.isGridCollapsed,o=t.getDraggingStatus,s=t.getDragStartItemRect,a=t.sizes,c=t.getItemCellDimensions,l=t.getDragMoveItemRect,u=o();if(!i||n||r||u)return null;var d=this.canElementResizeHeight()?Ie:we;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Oe,{ref:this.sizesPopupRef,sizes:a,getDragMoveItemRect:l,getDragStartItemRect:s,getItemCellDimensions:c}),d.map((function(t){var n=t.x,i=t.y,r=t.type;return(0,b.jsx)(ve,{type:r,y:i,x:n,onMouseDown:e.handleResizeMouseDown},"".concat(n,"-").concat(i))}))]})}}]),r}(m.Component);var Me=(0,g.Z)("lc-grid2-item-drag")("overlay"),Ce=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"dragOverlayRef",m.createRef()),(0,f.Z)((0,c.Z)(e),"handleMouseDown",(function(t){var n,i=e.props,r=i.isSectionSelected,o=i.setDragStartItemRect,s=i.setDraggingStatusAndUpdateResizeLogic,a=i.setDragStart,c=i.getParent,l=i.initializeMagnetismData,u=i.selectedSectionId,d=t.currentTarget.closest(".".concat(Me())),f=null==d||null===(n=d.querySelector("[data-section-id]"))||void 0===n?void 0:n.getAttribute("data-section-id");if(r&&u===f){var m=c();if(m){var p=m.getBoundingClientRect();o(p),s(!0),a(t.pageX,t.pageY),l(p),t.target.addEventListener("scroll",e.handleMouseUp),document.addEventListener("mousemove",e.handleMouseMove),document.addEventListener("mouseup",e.handleMouseUp)}}})),(0,f.Z)((0,c.Z)(e),"handleMouseMove",(function(t){var n=e.props,i=n.setElementOffset,r=n.getElementOffsetAndSizeWithMagnetism,o=n.getDragStart,s=n.getDragStartItemRect,a=n.onMouseMove,c=n.drawMagnetismLines,l=ue(t,o()),u=r({elementOffsetX:l.offsetX,elementOffsetY:l.offsetY,dragType:ye.Move,dragStartItemRect:s()}),d=u.elementOffsetX,f=u.elementOffsetY;i(d,f),c(fe({previousRect:s(),offsetX:d,offsetY:f})),a()})),(0,f.Z)((0,c.Z)(e),"handleMouseUp",(function(t){var n;if(t.target){null===(n=t.target)||void 0===n||n.removeEventListener("scroll",e.handleMouseUp),document.removeEventListener("mousemove",e.handleMouseMove),document.removeEventListener("mouseup",e.handleMouseUp);var i=e.props,r=i.getParent,o=i.savePosition,s=r();null!=s&&s.classList.contains("lc-grid2-item_selected")?o(s.getBoundingClientRect(),{dragType:ye.Move}):o(null,{dragType:ye.Move,nothingChanged:!0})}})),e}return(0,a.Z)(r,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isSectionSelected;return(0,b.jsx)("div",{ref:this.dragOverlayRef,className:Me({selected:n})(),onMouseDown:this.handleMouseDown,children:t})}}]),r}(m.Component);var xe,Ee=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"scrollTop",0),(0,f.Z)((0,c.Z)(e),"scrollLeft",0),(0,f.Z)((0,c.Z)(e),"onPageScroll",(function(t){var n=t.currentTarget,i=n.scrollTop,r=n.scrollLeft,o=e.props,s=o.getDraggingStatus,a=o.setElementOffset,c=o.setDragStart,l=o.getDragStart,u=o.getCurrentElementOffset;if(s()){var d=r-e.scrollLeft,f=i-e.scrollTop,m=u();a(m.offsetX+d,m.offsetY+f),c(l().x-d,l().y-f)}e.scrollTop=i,e.scrollLeft=r})),e}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onPageScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onPageScroll)}},{key:"render",value:function(){return null}}]),r}(m.Component),ze=n(41799),Be=ze.N&&(null===(xe=window._LC_)||void 0===xe?void 0:xe.gridDebounceWait)||500;var je=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"handleKeyDown",(function(t){var n=e.props,i=n.isSectionSelected,r=n.getDragStartItemRect;if(i){var o=t.code,s=t.shiftKey,a=t.metaKey,c=t.ctrlKey;if(o.startsWith("Arrow"))e.stopKeyUpHandler(),r()||e.handleFirstArrowPress(),e.handleArrowPress(o,s);else if("Backspace"===o)e.handleDeleteItem();else if("KeyC"===o&&(a||c))e.handleCopyItem();else{if("KeyV"!==o||!a&&!c)return;e.props.onPaste()}t.preventDefault()}})),(0,f.Z)((0,c.Z)(e),"handleKeyboardEventEnd",(0,p.debounce)((function(t){if(t.target){var n=e.props,i=n.savePosition,r=(0,n.getParent)();r&&(i(r.getBoundingClientRect(),{dragType:ye.Move}),window.removeEventListener("keyup",e.handleKeyboardEventEnd))}}),Be)),e}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"handleFirstArrowPress",value:function(){var e=this.props,t=e.getParent,n=e.setDragStartItemRect,i=t();i&&(n(i.getBoundingClientRect()),window.addEventListener("keyup",this.handleKeyboardEventEnd))}},{key:"stopKeyUpHandler",value:function(){this.handleKeyboardEventEnd.cancel()}},{key:"handleArrowPress",value:function(e,t){var n=this.props,i=n.getCurrentElementOffset,r=n.setElementOffset,o=i(),s=o.offsetY,a=o.offsetX,c=t?10:1;switch(e){case"ArrowUp":r(a,s-c);break;case"ArrowDown":r(a,s+c);break;case"ArrowLeft":r(a-c,s);break;case"ArrowRight":r(a+c,s)}}},{key:"handleDeleteItem",value:function(){var e=this.props.sectionId;(0,R.y1)(R.TV.DELETE_SECTION,e)}},{key:"handleCopyItem",value:function(){var e=this.props,t=e.sectionId;(0,e.onCopy)(t)}},{key:"render",value:function(){return null}}]),r}(m.Component),Ae=(n(82481),n(73689),n(61533)),ke={vertical:{mainSides:{startSide:"top",endSide:"bottom"},addSides:{startSide:"left",endSide:"right"}},horizontal:{mainSides:{startSide:"left",endSide:"right"},addSides:{startSide:"top",endSide:"bottom"}}},Te=function(e){var t=e.line,n=e.lineType,i=e.className,r=t.startY,o=t.endY,s=t.startX,a=o-r,c=t.endX-s,l="main"===n?"none":"4px 4px";return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("svg",{className:i,width:c||2,height:a||2,style:{top:r,left:s},children:(0,b.jsx)("line",{x1:0,y1:0,x2:c,y2:a,style:{"--alt-line-dasharray":l}})})})},Fe=(0,g.Z)("lc-grid2-item-dimensions-with-alt-logic-line"),He=function(e){var t=e.isOneLine,n=e.mainLine,i=e.addLine;if(!n||!i)return null;var r=Boolean(n.endX-n.startX),o=(n.endY+n.startY)/2,s=(n.endX+n.startX)/2,a=Math.round(n.endX-n.startX||n.endY-n.startY),c={"--dimensions-die-top":(r?n.startY:o)+"px","--dimensions-die-left":(r?s:n.startX)+"px"};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Te,{line:n,lineType:"main",className:Fe("main")()}),!t&&(0,b.jsx)(Te,{line:i,lineType:"add",className:Fe("add")()}),(0,b.jsxs)("div",{className:Fe("popup")(),style:c,children:[a,"px"]})]})};var Ye=(0,g.Z)("lc-grid2-item-dimensions-with-alt-logic"),Xe=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"state",{pressedAlt:!1,hoveredItemRect:null}),(0,f.Z)((0,c.Z)(e),"mouseCoordinates",null),(0,f.Z)((0,c.Z)(e),"hoveredItem",null),(0,f.Z)((0,c.Z)(e),"handleKeyDown",(function(t){var n=e.isAlt(t);if(!t.repeat){if(!n)return e.reset(),void window.removeEventListener("keyup",e.handleKeyUp);t.preventDefault(),e.setState({pressedAlt:!0}),e.findPointedElement(),window.addEventListener("keyup",e.handleKeyUp),window.addEventListener("scroll",e.handleScroll)}})),(0,f.Z)((0,c.Z)(e),"handleKeyUp",(function(t){e.isAlt(t)&&(e.reset(),window.removeEventListener("keyup",e.handleKeyUp))})),(0,f.Z)((0,c.Z)(e),"reset",(function(){e.setState({pressedAlt:!1,hoveredItemRect:null}),e.hoveredItem=null})),(0,f.Z)((0,c.Z)(e),"handleScroll",(function(){e.reset()})),(0,f.Z)((0,c.Z)(e),"handleMouseMove",(function(t){var n=e.state.pressedAlt;e.mouseCoordinates={x:t.clientX,y:t.clientY},n&&e.findPointedElement()})),(0,f.Z)((0,c.Z)(e),"findPointedElement",(0,p.throttle)((function(){var t=e.props,n=t.gridRef,i=t.isSectionSelected,r=t.getParent;if(e.mouseCoordinates&&i){var o=e.mouseCoordinates,s=o.x,a=o.y,c=document.elementsFromPoint(s,a).filter((function(e){var t=e.classList.contains("lc-grid2-item"),i=e.closest(".lc-grid2"),r=(null==n?void 0:n.current)===i;return t&&r})),l=null==c?void 0:c[0],u=r();if(l!==e.hoveredItem&&l!==u){var d=null==l?void 0:l.getBoundingClientRect();e.hoveredItem=l,e.setState({hoveredItemRect:d})}}}),300)),(0,f.Z)((0,c.Z)(e),"getIntersection",(function(e){var t=e.currentElementStartCoordinate,n=e.currentElementEndCoordinate,i=e.hoveredElementStartCoordinate,r=e.hoveredElementEndCoordinate,o=Math.max(t,i);return Math.min(n,r)-o})),(0,f.Z)((0,c.Z)(e),"getAllSidesForLines",(function(e){var t=e.itemRect,n=e.hoveredItemRect,i=e.isIntersection,r=e.directionType,o=e.isItemLiesInsideHoveredItem,s=ke[r],a=s.mainSides,c=a.startSide,l=a.endSide,u=s.addSides,d=u.startSide,f=u.endSide,m=null,p=null;return i&&!o?(m=[t[c]>n[c]&&t[c]<n[l]?t[c]:t[l]],p=[n[c]>t[c]&&n[c]<t[l]?n[l]:n[c]]):(m=[t[c],t[l]],p=[n[c],n[l]]),{sidesItemForMainLine:m,sidesHoveredItemForMainLine:p,sidesItemForAddLine:[(t[d]+t[f])/2],sidesHoveredItemForAddLine:[n[d],n[f]]}})),(0,f.Z)((0,c.Z)(e),"getSuitableSidesOnMinimumDistance",(function(t){var n=t.itemRect,i=t.hoveredItemRect,r=t.directionType,o=t.sidesItemForMainLine,s=t.sidesHoveredItemForMainLine,a=t.sidesItemForAddLine,c=t.sidesHoveredItemForAddLine,l=t.isItemLiesInsideHoveredItem,u=ke[r],d=u.mainSides,f=d.startSide,m=d.endSide,p=u.addSides,g=p.startSide,h=p.endSide,v={sidesItemForLine:o,sidesHoveredItemForLine:s},y=l?e.getMinDistancesBetweenSideIfItemInsideHoveredItem(v):e.getMinDistancesBetweenSides(v),Z=e.getMinDistancesBetweenSides({sidesItemForLine:a,sidesHoveredItemForLine:c}),S=i[f],R=i[m],I=y.map((function(e){return S===e.end||S===e.start?S:R-2}));return{nearestSidesForMainLines:y,nearestSidesForAddLines:Z,nearestHoveredItemAxises:I,centerForMainLine:(n[g]+n[h])/2}})),(0,f.Z)((0,c.Z)(e),"getFormatedLinesCoordinates",(function(e){var t=e.nearestSidesForMainLine,n=e.nearestSidesForAddLine,i=e.centerForMainLine,r=e.nearestHoveredItemAxis,o=e.directionType,s={startX:t.start,endX:t.end,startY:i,endY:i},a={startX:r,endX:r,startY:n.start,endY:n.end};return"vertical"===o&&(s={startY:t.start,endY:t.end,startX:i,endX:i},a={startY:r,endY:r,startX:n.start,endX:n.end}),{mainLine:s,additionalLine:a}})),(0,f.Z)((0,c.Z)(e),"getCalculatedLinesCoordinates",(function(t){var n=t.itemRect,i=t.hoveredItemRect,r=t.isIntersection,o=t.directionType,s=t.isItemLiesInsideHoveredItem,a=e.getAllSidesForLines({itemRect:n,hoveredItemRect:i,isIntersection:r,directionType:o,isItemLiesInsideHoveredItem:s}),c=a.sidesItemForMainLine,l=a.sidesHoveredItemForMainLine,u=a.sidesItemForAddLine,d=a.sidesHoveredItemForAddLine,f=e.getSuitableSidesOnMinimumDistance({itemRect:n,hoveredItemRect:i,directionType:o,sidesItemForMainLine:c,sidesHoveredItemForMainLine:l,sidesItemForAddLine:u,sidesHoveredItemForAddLine:d,isItemLiesInsideHoveredItem:s})||{},m=f.nearestSidesForMainLines,p=f.nearestSidesForAddLines,g=f.nearestHoveredItemAxises,h=f.centerForMainLine;return m.map((function(t,n){return e.getFormatedLinesCoordinates({nearestSidesForMainLine:t,nearestSidesForAddLine:p[0],nearestHoveredItemAxis:g[n],centerForMainLine:h,directionType:o})}))})),(0,f.Z)((0,c.Z)(e),"getMinDistancesBetweenSides",(function(e){var t=e.sidesItemForLine,n=e.sidesHoveredItemForLine,i=null;return t.forEach((function(e){n.forEach((function(t){var n,r=Math.abs(e-t),o=i&&r<(null===(n=i)||void 0===n?void 0:n.distance);i&&!o||(i={start:Math.min(e,t),end:Math.max(e,t),distance:r})}))})),[i]})),(0,f.Z)((0,c.Z)(e),"getMinDistancesBetweenSideIfItemInsideHoveredItem",(function(e){for(var t=e.sidesItemForLine,n=e.sidesHoveredItemForLine,i=[],r=0;r<2;r++){var o=Math.abs(t[r]-n[r]);if(Math.trunc(o)){var s={start:Math.min(t[r],n[r]),end:Math.max(t[r],n[r]),distance:o};i.push(s)}}return i})),(0,f.Z)((0,c.Z)(e),"getDataAboutLines",(function(){var t=e.props.getParent,n=e.state.hoveredItemRect,i=t();if(i&&n){var r=i.getBoundingClientRect();if(r){var o=e.getIntersection({currentElementStartCoordinate:r.top,currentElementEndCoordinate:r.bottom,hoveredElementStartCoordinate:n.top,hoveredElementEndCoordinate:n.bottom}),s=e.getIntersection({currentElementStartCoordinate:r.left,currentElementEndCoordinate:r.right,hoveredElementStartCoordinate:n.left,hoveredElementEndCoordinate:n.right}),a=n.width===s,c=n.height===o,l=r.left>=n.left&&r.right<=n.right,u=r.top>=n.top&&r.bottom<=n.bottom,d=e.getCalculatedLinesCoordinates({itemRect:r,hoveredItemRect:n,isIntersection:s>0,directionType:"horizontal",isItemLiesInsideHoveredItem:l})||{},f=e.getCalculatedLinesCoordinates({itemRect:r,hoveredItemRect:n,isIntersection:o>0,directionType:"vertical",isItemLiesInsideHoveredItem:u})||{},m=(r.top+r.bottom)/2,p=(r.left+r.right)/2,g=m>=n.top&&m<=n.bottom,h=p>=n.left&&p<=n.right;return{horizontal:{lines:l?d:[d[0]],isElementCenterInsideHovered:g,isItemLiesBetweenSidesHoveredItem:a},vertical:{lines:u?f:[f[0]],isElementCenterInsideHovered:h,isItemLiesBetweenSidesHoveredItem:c}}}}})),e}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("mousemove",this.handleMouseMove)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("mousemove",this.handleMouseMove)}},{key:"isAlt",value:function(e){return"Alt"===e.key}},{key:"render",value:function(){var e=this.props,t=e.getParent,n=e.isSectionSelected,i=e.gridRef,r=e.getDraggingStatus,o=this.state,s=o.pressedAlt,a=o.hoveredItemRect,c=t(),l=r();if(!s||!a||!c||!n||l)return null;var u=this.getDataAboutLines()||{},d=u.horizontal,f=u.vertical;return d&&f?(0,b.jsx)(b.Fragment,{children:(0,Ae.createPortal)((0,b.jsxs)("div",{className:Ye(),children:[d.lines.map((function(e){var t=e.mainLine,n=e.additionalLine,i=d.isItemLiesBetweenSidesHoveredItem,r=d.isElementCenterInsideHovered;return i?null:(0,b.jsx)(He,{isOneLine:r,mainLine:t,addLine:n})})),f.lines.map((function(e){var t=e.mainLine,n=e.additionalLine,i=f.isItemLiesBetweenSidesHoveredItem,r=f.isElementCenterInsideHovered;return i?null:(0,b.jsx)(He,{isOneLine:r,mainLine:t,addLine:n})}))]}),(null==i?void 0:i.current)||document.body)}):null}}]),r}(m.Component);function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"dragStart",{x:0,y:0}),(0,f.Z)((0,c.Z)(e),"getDragStart",(function(){return e.dragStart})),(0,f.Z)((0,c.Z)(e),"setDragStart",(function(t,n){e.dragStart={x:t,y:n}})),(0,f.Z)((0,c.Z)(e),"dragMoveItemRect",null),(0,f.Z)((0,c.Z)(e),"getDragMoveItemRect",(function(){return e.dragMoveItemRect})),(0,f.Z)((0,c.Z)(e),"setDragMoveItemRect",(function(t){e.dragMoveItemRect=t})),(0,f.Z)((0,c.Z)(e),"isDragging",!1),(0,f.Z)((0,c.Z)(e),"getDraggingStatus",(function(){return e.isDragging})),(0,f.Z)((0,c.Z)(e),"setDraggingStatusAndUpdateResizeLogic",(function(t){var n=e.getDraggingStatus();e.isDragging=t,n!==t&&e.updateItemResizeLogicComponent()})),(0,f.Z)((0,c.Z)(e),"dragStartItemRect",null),(0,f.Z)((0,c.Z)(e),"getDragStartItemRect",(function(){return e.dragStartItemRect})),(0,f.Z)((0,c.Z)(e),"setDragStartItemRect",(function(t){e.dragStartItemRect=t})),(0,f.Z)((0,c.Z)(e),"setDefaultProperties",(function(){e.setDragStart(0,0),e.setDraggingStatusAndUpdateResizeLogic(!1),e.setDragStartItemRect(null),e.setDragMoveItemRect(null)})),(0,f.Z)((0,c.Z)(e),"itemResizeLogicRef",m.createRef()),(0,f.Z)((0,c.Z)(e),"updateItemResizeLogicComponent",(function(){e.itemResizeLogicRef.current&&e.itemResizeLogicRef.current.forceUpdate()})),(0,f.Z)((0,c.Z)(e),"savePosition",(function(t,n){var i,r,o=e.getDragStartItemRect();e.setDefaultProperties(),n=Ne(Ne({},n),{},{dragStartItemRect:o}),o&&t&&(r=t,(i=o).bottom!==r.bottom||i.height!==r.height||i.left!==r.left||i.right!==r.right||i.top!==r.top||i.width!==r.width||i.x!==r.x||i.y!==r.y)?e.props.savePosition(t,n):e.props.savePosition(null,Ne(Ne({},n),{},{nothingChanged:!0}))})),e}return(0,a.Z)(r,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.type,i=e.enableAnalyticsMode,r=e.isSectionSelected,o=e.sectionId,s=e.getParent,a=e.onMouseMove,c=e.onPaste,l=e.onCopy,u=e.setElementOffset,d=e.setElementDimensions,f=e.getCurrentElementOffset,m=e.isGridCollapsed,p=e.selectedSectionId,g=e.sizes,h=e.area,v=e.setItemCellDimensions,y=e.getItemCellDimensions,Z=e.initializeMagnetismData,S=e.getElementOffsetAndSizeWithMagnetism,R=e.drawMagnetismLines,I=e.gridRef;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ce,{sectionId:o,isSectionSelected:r,onMouseMove:a,getParent:s,setElementOffset:u,selectedSectionId:p,initializeMagnetismData:Z,getElementOffsetAndSizeWithMagnetism:S,drawMagnetismLines:R,savePosition:this.savePosition,getDragStart:this.getDragStart,setDragStart:this.setDragStart,setDraggingStatusAndUpdateResizeLogic:this.setDraggingStatusAndUpdateResizeLogic,getDragStartItemRect:this.getDragStartItemRect,setDragStartItemRect:this.setDragStartItemRect,children:t}),(0,b.jsx)(Le,{ref:this.itemResizeLogicRef,type:n,isGridCollapsed:m,isSectionSelected:r,enableAnalyticsMode:i,sizes:g,area:h,onMouseMove:a,setElementOffset:u,setElementDimensions:d,getParent:s,initializeMagnetismData:Z,getElementOffsetAndSizeWithMagnetism:S,drawMagnetismLines:R,savePosition:this.savePosition,getDragStart:this.getDragStart,setDragStart:this.setDragStart,getDragStartItemRect:this.getDragStartItemRect,setDragStartItemRect:this.setDragStartItemRect,getDraggingStatus:this.getDraggingStatus,setItemCellDimensions:v,getItemCellDimensions:y,getDragMoveItemRect:this.getDragMoveItemRect,setDragMoveItemRect:this.setDragMoveItemRect}),(0,b.jsx)(Ee,{setElementOffset:u,getCurrentElementOffset:f,getParent:s,savePosition:this.savePosition,getDraggingStatus:this.getDraggingStatus,getDragStart:this.getDragStart,setDragStart:this.setDragStart}),(0,b.jsx)(je,{getParent:s,sectionId:o,isSectionSelected:r,getCurrentElementOffset:f,onCopy:l,onPaste:c,setElementOffset:u,savePosition:this.savePosition,getDragStartItemRect:this.getDragStartItemRect,setDragStartItemRect:this.setDragStartItemRect}),(0,b.jsx)(Xe,{gridRef:I,isSectionSelected:r,getDraggingStatus:this.getDraggingStatus,getParent:s})]})}}]),r}(m.Component);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ke,Ve=(0,g.Z)("lc-grid2-item"),qe=function(e){(0,l.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function r(){var e;(0,s.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"gridItem",m.createRef()),(0,f.Z)((0,c.Z)(e),"calculatePosition",(function(){var t=e.props.gridCellSettings.margins,n=t.left,i=t.top,r=t.right,o=t.bottom,s={},a=ce(n),c=ce(r),l=ce(i),u=ce(o);return a?s.marginLeft=(0,oe.I)(n):c&&(s.marginRight=(0,oe.I)(r)),l?s.marginTop=(0,oe.I)(i):u&&(s.marginBottom=(0,oe.I)(o)),{justifySelf:a?"start":c?"end":"center",alignSelf:l?"start":u?"end":"center",margins:s}})),(0,f.Z)((0,c.Z)(e),"saveItemPosition",(function(t,n){e.props.saveItemPosition({itemRect:t,itemProps:e.props,params:n})})),(0,f.Z)((0,c.Z)(e),"getParent",(function(){return e.gridItem.current})),(0,f.Z)((0,c.Z)(e),"setElementOffset",(function(t,n){var i=e.getParent();i&&(i.style.transform="translate(".concat(t,"px, ").concat(n,"px)"))})),(0,f.Z)((0,c.Z)(e),"setElementDimensions",(function(t,n){var i=e.getParent();i&&(i.style.width=t,i.style.height=n)})),(0,f.Z)((0,c.Z)(e),"getCurrentElementOffset",(function(){var t=e.getParent();if(!t)return{offsetX:0,offsetY:0};var n=t.style.transform.match(/translate\((-?\d+)px, (-?\d+)px\)/);if(n){var i=n[1],r=n[2];return{offsetX:parseFloat(i),offsetY:parseFloat(r)}}return{offsetX:0,offsetY:0}})),(0,f.Z)((0,c.Z)(e),"isHoverable",(function(){var t=e.props,n=t.isSectionSelected,i=t.selectedSectionId,r=t.needFrame,o=t.sectionId,s=t.currentSectionParentId,a=t.selectedSectionParentIds,c=t.selectedSectionParentId;if(n||!r||!a||!s)return!1;var l=c===o,u=a.includes(s);return!l&&(u||s===i)})),e}return(0,a.Z)(r,[{key:"getGridChildStyle",value:function(){var e=this.props,t=e.gridCellSettings.area,n=e.sizes,i=n.width,r=n.height,o=this.calculatePosition(),s=o.justifySelf,a=o.alignSelf,c=o.margins;return _e(_e({},t),{},{width:"auto"===(0,oe.I)(i)?"min-content":(0,oe.I)(i),height:"auto"===(0,oe.I)(r)?"min-content":(0,oe.I)(r),justifySelf:s,alignSelf:a},c)}},{key:"componentDidUpdate",value:function(e){var t,n,i=this.getParent();i&&(i.style.transform="",!(0,p.isEqual)(null===(t=e.gridCellSettings)||void 0===t?void 0:t.margins,null===(n=this.props.gridCellSettings)||void 0===n?void 0:n.margins))&&(i.style.display="none",i.offsetHeight,i.style.display="block")}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.children,i=e.sectionId,r=e.isSectionSelected,o=e.enableAnalyticsMode,s=e.needFrame,a=e.onMouseMove,c=e.onPaste,l=e.onCopy,u=e.isGridCollapsed,d=e.selectedSectionId,f=e.sizes,m=e.gridCellSettings.area,p=e.setItemCellDimensions,g=e.getItemCellDimensions,h=e.initializeMagnetismData,v=e.getElementOffsetAndSizeWithMagnetism,y=e.drawMagnetismLines,Z=e.gridRef,S=this.getGridChildStyle();return(0,b.jsx)("div",{className:Ve({selected:Boolean(r),"drag-ref-disable":Boolean(s),hoverable:this.isHoverable()})(),"data-grid-item-id":s&&i,style:S,ref:this.gridItem,children:s?(0,b.jsx)(Ue,{gridRef:Z,type:t,isGridCollapsed:u,sectionId:i,isSectionSelected:Boolean(r),selectedSectionId:d,enableAnalyticsMode:Boolean(o),getParent:this.getParent,savePosition:this.saveItemPosition,setElementOffset:this.setElementOffset,setElementDimensions:this.setElementDimensions,getCurrentElementOffset:this.getCurrentElementOffset,setItemCellDimensions:p,getItemCellDimensions:g,onMouseMove:a,onCopy:l,onPaste:c,sizes:f,area:m,initializeMagnetismData:h,getElementOffsetAndSizeWithMagnetism:v,drawMagnetismLines:y,children:n}):n})}}]),r}(m.Component),Je=(0,h.qC)((0,J.$)("LcGrid2Item"),(0,ee.K)((function(e,t){var n,i,r,o,s,a,c,l=e.lpc,u=void 0===l?ae.E3:l,d=u.needFrame,f=u.sectionsState,m=(0,y.Nk)(e,t.sectionId),p=(null==m?void 0:m.type)===se.bE.LcGrid2,g=null==m?void 0:m.hasChildren,h=null===(n=t.rows)||void 0===n?void 0:n.every((function(e){return e.unit===se.fb.Auto||"0"===e.value||""===e.value})),v=t.sizes.height.unit===se.fb.Auto||"0"===t.sizes.height.value||""===t.sizes.height.value,Z=p&&!g&&h&&v,S=null==f||null===(i=f.sectionsData)||void 0===i||null===(r=i[t.sectionId])||void 0===r?void 0:r.parentId,R=null==f||null===(o=f.sectionsData)||void 0===o||null===(s=o[t.selectedSectionId])||void 0===s?void 0:s.parentIds,I=null==f||null===(a=f.sectionsData)||void 0===a||null===(c=a[t.selectedSectionId])||void 0===c?void 0:c.parentId;return{type:null==m?void 0:m.type,isGridCollapsed:Z,needFrame:Boolean(d),isSectionSelected:Boolean((0,y.VL)(e,t.sectionId)),enableAnalyticsMode:Boolean((0,y.y0)(e).enableAnalyticsMode),currentSectionParentId:S,selectedSectionParentIds:R,selectedSectionParentId:I}})))(qe),$e=ze.N&&(null===(Ke=window._LC_)||void 0===Ke?void 0:Ke.gridDebounceWait)||1500,Qe=function(e){return e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right",e.CenterHorizontal="centerHorizontal",e.CenterVertical="centerVertical",e}({});function et(e){var t=e.rects,n=e.isCenterLinesIncluded;if(null==t||!t.length)return{vertical:[],horizontal:[]};var i=[],r=[];return t.forEach((function(e){i.push(e.left),r.push(e.top),n&&(i.push((e.left+e.right)/2),r.push((e.top+e.bottom)/2)),i.push(e.right),r.push(e.bottom)})),{vertical:i,horizontal:r}}function tt(e){return!isNaN(e)}function nt(e){var t;return null!==(t=(0,p.minBy)(e,(function(e){return Math.abs(e)})))&&void 0!==t?t:1/0}var it=function(e){var t,n,i=e.elementOffsetX,r=e.elementOffsetY,o=e.width,s=e.height,a=e.dragType,c=e.dragStartItemRect,l=e.resizeButtonPosition,u=e.magnetismLines,d=(t=function(e){var t=e.elementOffsetX,n=e.elementOffsetY,i=e.width,r=e.height,o=e.dragType,s=e.dragStartItemRect,a=e.resizeButtonPosition;return o===ye.Move?function(e){var t=e.elementOffsetX,n=e.elementOffsetY,i=e.dragStartItemRect;return i?{left:i.left+t,top:i.top+n,right:i.right+t,bottom:i.bottom+n}:{left:0,top:0,right:0,bottom:0}}({elementOffsetX:t,elementOffsetY:n,dragStartItemRect:s}):function(e){var t=e.elementOffsetX,n=e.elementOffsetY,i=e.width,r=e.height,o=e.dragStartItemRect,s=e.resizeButtonPosition;if(!o||!s||(0,p.isUndefined)(i)||(0,p.isUndefined)(r))return{left:0,top:0,right:0,bottom:0};var a=o.left,c=o.top,l=o.right,u=o.bottom;return s.x===me.Left&&(a+=t),s.y===pe.Top&&(c+=n),s.x===me.Right&&(l+=parseFloat(i)-o.width),s.y===pe.Bottom&&(u+=parseFloat(r)-o.height),{left:a,top:c,right:l,bottom:u}}({elementOffsetX:t,elementOffsetY:n,width:i,height:r,dragStartItemRect:s,resizeButtonPosition:a})}({elementOffsetX:i,elementOffsetY:r,width:o,height:s,dragType:a,dragStartItemRect:c,resizeButtonPosition:l}),{left:(n=u).vertical.map((function(e){return e-t.left})).filter(tt),centerVertical:n.vertical.map((function(e){return e-(t.left+t.right)/2})).filter(tt),right:n.vertical.map((function(e){return e-t.right})).filter(tt),top:n.horizontal.map((function(e){return e-t.top})).filter(tt),centerHorizontal:n.horizontal.map((function(e){return e-(t.top+t.bottom)/2})).filter(tt),bottom:n.horizontal.map((function(e){return e-t.bottom})).filter(tt)});return{left:nt(d.left),centerVertical:nt(d.centerVertical),right:nt(d.right),top:nt(d.top),centerHorizontal:nt(d.centerHorizontal),bottom:nt(d.bottom)}};function rt(e){return{top:e.top,bottom:e.bottom,left:e.left,right:e.right,centerHorizontal:(e.top+e.bottom)/2,centerVertical:(e.left+e.right)/2}}function ot(e,t){return Math.abs(e-t)<=.005}n(2707);var st=(0,g.Z)("lc-grid2-item-magnetism"),at=function(e){(0,l.Z)(o,e);var t,n,i=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function o(){var e;(0,s.Z)(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"getPoint",(function(e){var t=e.point,n=e.magnetismSide,i=e.isFromPoint;return(0,b.jsx)("div",{className:st("point")({from:Boolean(i),to:Boolean(!i),side:"".concat(t.sideY,"-").concat(t.sideX),magnetismSide:n})(),style:{"--magnetism-point-top":"".concat(t.y,"px"),"--magnetism-point-left":"".concat(t.x,"px")}},"point ".concat(t.y,"-").concat(t.x,"-").concat(i))})),(0,f.Z)((0,c.Z)(e),"getPoints",(function(t){var n=t.from,i=t.to,r=t.magnetismSide,o=e.getPoint({point:n[0],magnetismSide:r,isFromPoint:!0}),s=e.getPoint({point:n[1],magnetismSide:r,isFromPoint:!0}),a=e.getPoint({point:i[0],magnetismSide:r}),c=e.getPoint({point:i[1],magnetismSide:r});if(r===Qe.CenterHorizontal&&n[1].x<i[0].x){if(n[1].x<i[0].x)return[s,a,c];if(n[0].x>i[1].x)return[o,a,c]}if(r===Qe.CenterVertical){if(n[1].y<i[0].y)return[s,a,c];if(n[0].y>i[1].y)return[o,a,c]}return[o,s,a,c]})),(0,f.Z)((0,c.Z)(e),"getLine",(function(e){var t=e.start,n=e.end,i=e.magnetismSide,r=e.isLineBetween,o=t.y,s=t.x,a=[Qe.Top,Qe.CenterHorizontal,Qe.Bottom].includes(i),c=n.x-t.x,l=n.y-t.y;return a?l=2:c=2,(0,b.jsx)("div",{className:st("line")({magnetismSide:i})(),style:{"--magnetism-line-top":"".concat(o,"px"),"--magnetism-line-left":"".concat(s,"px"),"--magnetism-line-width":"".concat(c,"px"),"--magnetism-line-height":"".concat(l,"px")}},"line ".concat(o,"-").concat(s,"-").concat(c,"-").concat(l,"-").concat(r))})),(0,f.Z)((0,c.Z)(e),"getLineBetween",(function(t,n){var i=t.sort((function(e,t){return[Qe.Top,Qe.CenterHorizontal,Qe.Bottom].includes(n)?e.x-t.x:e.y-t.y}));return e.getLine({start:i[1],end:i[2],magnetismSide:n,isLineBetween:!0})})),(0,f.Z)((0,c.Z)(e),"getElements",(function(t){var n=e.getPoints(t);return[e.getLineBetween([].concat((0,r.Z)(t.from),(0,r.Z)(t.to)),t.magnetismSide),e.getLine({start:t.to[0],end:t.to[1],magnetismSide:t.magnetismSide})].concat((0,r.Z)(n))})),e}return(0,a.Z)(o,[{key:"render",value:function(){var e=(0,this.props.getMagnetismPoints)(),t=e.verticalPoints,n=e.horizontalPoints;return t.length||n.length?(0,b.jsxs)(b.Fragment,{children:[n.map(this.getElements),t.map(this.getElements)]}):null}}]),o}(m.Component),ct=function(e){return e.Fixed="fixed",e.Sticky="sticky",e}({});function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ut(e){return null!==e?(0,oe.I)(e,0):""}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var ft=(0,g.Z)("lc-fixed-grid2");function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gt=(0,g.Z)("lc-grid2"),ht=(0,g.Z)("lc-grid2-offsets"),vt=function(e){(0,l.Z)(g,e);var t,n,i=(t=g,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,d.Z)(t);if(n){var r=(0,d.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)});function g(){var e;(0,s.Z)(this,g);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=i.call.apply(i,[this].concat(n)),(0,f.Z)((0,c.Z)(e),"gridRef",m.createRef()),(0,f.Z)((0,c.Z)(e),"magnetismRef",m.createRef()),(0,f.Z)((0,c.Z)(e),"updateMap",{}),(0,f.Z)((0,c.Z)(e),"itemCellDimensions",null),(0,f.Z)((0,c.Z)(e),"getItemCellDimensions",(function(){return e.itemCellDimensions})),(0,f.Z)((0,c.Z)(e),"setItemCellDimensions",(function(t){var n=t.gridColumnStart,i=t.gridColumnEnd,r=t.gridRowStart,o=t.gridRowEnd,s=e.props.columns,a=e.getGridCellsRects(),c=s.length,l=(0,Pe.bM)({rowStart:r,columnStart:n,columnsCount:c}),u=(0,Pe.bM)({rowStart:o-1,columnStart:i-1,columnsCount:c}),d=a[l],f=a[u];e.itemCellDimensions=(0,Pe.YZ)(d,f)})),(0,f.Z)((0,c.Z)(e),"state",{updatedByState:!1,childrenProps:g.getChildrenProps(e.props)}),(0,f.Z)((0,c.Z)(e),"recalcMagnetismData",(function(t){t.isDirectChildSelected&&e.clearMagnetismLines()})),(0,f.Z)((0,c.Z)(e),"handleKeyDown",(function(t){var n=e.props.isGridSelected,i=t.code,r=t.metaKey,o=t.ctrlKey;"KeyV"===i&&(r||o)&&n&&(t.preventDefault(),e.handlePasteItem())})),(0,f.Z)((0,c.Z)(e),"getPositionByDiagonal",(function(t,n){var i=(0,Pe.Bt)(t),r=Object.entries(i).reduce((function(t,i){var r=(0,o.Z)(i,2),s=r[0],a=r[1];return t[s]=(0,Pe.OE)({point:a,gridCells:n,columnsCount:e.props.columns.length}),t}),{});return{columnStart:r.leftTopPoint.column,columnEnd:r.rightBottomPoint.column+1,rowStart:r.leftTopPoint.row,rowEnd:r.rightBottomPoint.row+1}})),(0,f.Z)((0,c.Z)(e),"getMargins",(function(e){var t=e.itemRect,n=e.itemProps,i=e.chosenArea,r=i.startCell,o=i.endCell,s=i.width,a=t.x,c=t.y,l=t.right,u=t.bottom,d=a-r.x,f=c-r.y,m=o.right-l,p=o.bottom-u,g=n.gridCellSettings.margins,h=g.top,v=g.left,y=g.right,Z=g.bottom,S=(null==h?void 0:h.unit)===se.fb.Auto&&(null==Z?void 0:Z.unit)===se.fb.Auto,R=(null==v?void 0:v.unit)===se.fb.Auto&&(null==y?void 0:y.unit)===se.fb.Auto;return{left:ce(v)||R?(0,Pe.Jb)(d,v.unit,s):v,right:ce(y)?(0,Pe.Jb)(m,y.unit,s):y,top:ce(h)||S?(0,Pe.Jb)(f,h.unit,s):h,bottom:ce(Z)?(0,Pe.Jb)(p,Z.unit,s):Z}})),(0,f.Z)((0,c.Z)(e),"getGridCellsRects",(function(){var t=document.querySelectorAll('[data-section-id="'.concat(e.props.sectionId,'"] .lc-grid2-editor-cell'));return Array.from(t).map((function(e){return e.getBoundingClientRect()}))})),(0,f.Z)((0,c.Z)(e),"getGridItemsRects",(function(){var t,n=Array.from((null===(t=e.gridRef.current)||void 0===t?void 0:t.childNodes)||[]).filter((function(e){return e.classList.contains(Ve())}));return Array.from(n).map((function(e){return e.getBoundingClientRect()}))})),(0,f.Z)((0,c.Z)(e),"getSizes",(function(t){var n=t.itemRect,i=t.itemProps,r=t.gridCells,o=t.chosenArea,s=t.params;return s.dragType===ye.Move?(0,Pe.k_)({itemProps:i,gridCells:r,chosenArea:o,columnsCount:e.props.columns.length}):(0,Pe.Wh)({itemProps:i,itemRect:n,chosenArea:o,params:s})})),(0,f.Z)((0,c.Z)(e),"saveItemPosition",(function(t){var n=t.itemRect,i=t.itemProps,r=t.params;if(e.clearMagnetismLines(),!r.nothingChanged){var o=e.getGridCellsRects(),s=e.getPositionByDiagonal(n,o),a=(0,Pe.LP)({gridCells:o,position:s,columnsCount:e.props.columns.length}),c=a.startCell,l=a.endCell,u=(0,Pe.YZ)(c,l),d=u.width,f=u.height,m=e.getMargins({itemRect:n,itemProps:i,chosenArea:{startCell:c,endCell:l,width:d,height:f}}),g=e.getSizes({itemRect:n,itemProps:i,gridCells:o,chosenArea:{startCell:c,endCell:l,width:d,height:f},params:r}),h=e.getPreparedDataToSave({position:s,margins:m,sizes:g,itemProps:i});(0,p.isEmpty)(h)||(e.saveToState(i.sectionId,h),e.saveDataForSend(i.sectionId,h),e.sendToChannel())}})),(0,f.Z)((0,c.Z)(e),"handleCopyItem",(function(t){e.sectionToCopy=t})),(0,f.Z)((0,c.Z)(e),"handlePasteItem",(function(){e.sectionToCopy&&((0,R.y1)(R.TV.COPY_SECTION,e.sectionToCopy),(0,R.y1)(R.TV.SELECT_SECTION,e.sectionToCopy))})),(0,f.Z)((0,c.Z)(e),"getPreparedDataToSave",(function(t){var n,i=t.position,r=t.itemProps,o=t.margins,s=t.sizes,a=(0,q.Sp)({bpProps:(null===(n=e.props.bpPropsMap)||void 0===n?void 0:n[r.sectionId])||{},currentBreakpoint:e.props.currentBreakpoint,shouldDeleteReactKey:!0}),c=a.gridCellSettings,l=a.sizes,u={margins:o,area:{gridColumnStart:i.columnStart,gridColumnEnd:i.columnEnd,gridRowStart:i.rowStart,gridRowEnd:i.rowEnd}};return pt(pt({},(0,p.isEqual)(u,c)?{}:{gridCellSettings:u}),(0,p.isEqual)(s,l)?{}:{sizes:s})})),(0,f.Z)((0,c.Z)(e),"sendToChannel",(0,v.D)((function(){Object.entries(e.updateMap).forEach((function(e){var t=(0,o.Z)(e,2),n=t[0],i=t[1];(0,R.y1)(R.TV.SET_SECTION_PROPERTY,{sectionId:n,property:"section:props",value:i})})),e.updateMap={}}),$e)),(0,f.Z)((0,c.Z)(e),"saveToState",(function(t,n){e.setState((function(e,i){return{childrenProps:pt(pt({},e.childrenProps),{},(0,f.Z)({},t,pt(pt({},e.childrenProps[t]),{},(0,f.Z)({},i.currentBreakpoint,pt(pt({},(0,q.Sp)({bpProps:e.childrenProps[t],currentBreakpoint:i.currentBreakpoint,shouldDeleteReactKey:!0})),n))))),updatedByState:!0}}))})),(0,f.Z)((0,c.Z)(e),"saveDataForSend",(function(t,n){var i;e.updateMap[t]=pt(pt({},e.updateMap[t]),{},(0,f.Z)({},e.props.currentBreakpoint,pt(pt({},null===(i=e.updateMap[t])||void 0===i?void 0:i[e.props.currentBreakpoint]),n)))})),(0,f.Z)((0,c.Z)(e),"handleMouseMove",(function(){e.sendToChannel.cancel()})),(0,f.Z)((0,c.Z)(e),"getItemProperties",(function(t){var n=e.props.currentBreakpoint,i=e.state.childrenProps;return(0,q.Sp)({bpProps:i[t]||{},currentBreakpoint:n,shouldDeleteReactKey:!0})})),(0,f.Z)((0,c.Z)(e),"magnetismData",{cells:{verticalLines:[],horizontalLines:[],initialRects:[]},elements:{verticalLines:[],horizontalLines:[],initialRects:[]}}),(0,f.Z)((0,c.Z)(e),"initializeMagnetismData",(function(t){var n,i,r,o,s,a=(n={cellsRects:e.getGridCellsRects(),elementsRects:e.getGridItemsRects(),itemRect:t},i=n.cellsRects,r=function(e,t){return e.filter((function(e){return!(e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height)}))}(n.elementsRects,n.itemRect),o=et({rects:i}),s=et({rects:r,isCenterLinesIncluded:!0}),{cells:{verticalLines:o.vertical,horizontalLines:o.horizontal,initialRects:i},elements:{verticalLines:s.vertical,horizontalLines:s.horizontal,initialRects:r}});e.setMagnetismData(a)})),(0,f.Z)((0,c.Z)(e),"getMagnetismData",(function(){return e.magnetismData})),(0,f.Z)((0,c.Z)(e),"setMagnetismData",(function(t){e.magnetismData=t})),(0,f.Z)((0,c.Z)(e),"clearMagnetismData",(function(){e.magnetismData={cells:{verticalLines:[],horizontalLines:[],initialRects:[]},elements:{verticalLines:[],horizontalLines:[],initialRects:[]}}})),(0,f.Z)((0,c.Z)(e),"getUnitedMagnetismLines",(function(){var t=e.getMagnetismData();return{vertical:[].concat((0,r.Z)(t.cells.verticalLines),(0,r.Z)(t.elements.verticalLines)),horizontal:[].concat((0,r.Z)(t.cells.horizontalLines),(0,r.Z)(t.elements.horizontalLines))}})),(0,f.Z)((0,c.Z)(e),"getElementOffsetAndSizeWithMagnetism",(function(t){return function(e){var t=e.elementOffsetX,n=e.elementOffsetY,i=e.width,r=e.height,o=e.dragType,s=e.dragStartItemRect,a=e.resizeButtonPosition,c=e.magnetismLines,l=it({elementOffsetX:t,elementOffsetY:n,width:i,height:r,dragType:o,dragStartItemRect:s,resizeButtonPosition:a,magnetismLines:c});return o===ye.Move?function(e){var t=e.elementOffsetX,n=e.elementOffsetY,i=e.minDistance,r=t,o=n;return Math.abs(i.right)<=4&&(r=t+i.right),Math.abs(i.centerVertical)<=4&&(r=t+i.centerVertical),Math.abs(i.left)<=4&&(r=t+i.left),Math.abs(i.bottom)<=4&&(o=n+i.bottom),Math.abs(i.centerHorizontal)<=4&&(o=n+i.centerHorizontal),Math.abs(i.top)<=4&&(o=n+i.top),{elementOffsetX:r,elementOffsetY:o}}({elementOffsetX:t,elementOffsetY:n,minDistance:l}):function(e){var t=e.elementOffsetX,n=e.elementOffsetY,i=e.width,r=e.height,o=e.resizeButtonPosition,s=e.minDistance;if(!o||(0,p.isUndefined)(i)||(0,p.isUndefined)(r))return{elementOffsetX:0,elementOffsetY:0,width:0,height:0};var a=t,c=n,l=i,u=r;return o.x===me.Left&&(Math.abs(s.centerVertical)<=4&&(a=t+2*s.centerVertical,l="".concat(parseFloat(i)-2*s.centerVertical,"px")),Math.abs(s.left)<=4&&(a=t+s.left,l="".concat(parseFloat(i)-s.left,"px"))),o.y===pe.Top&&(Math.abs(s.centerHorizontal)<=4&&(c=n+2*s.centerHorizontal,u="".concat(parseFloat(r)-2*s.centerHorizontal,"px")),Math.abs(s.top)<=4&&(c=n+s.top,u="".concat(parseFloat(r)-s.top,"px"))),o.x===me.Right&&(Math.abs(s.centerVertical)<=4&&(l="".concat(parseFloat(i)+2*s.centerVertical,"px")),Math.abs(s.right)<=4&&(l="".concat(parseFloat(i)+s.right,"px"))),o.y===pe.Bottom&&(Math.abs(s.centerHorizontal)<=4&&(u="".concat(parseFloat(r)+2*s.centerHorizontal,"px")),Math.abs(s.bottom)<=4&&(u="".concat(parseFloat(r)+s.bottom,"px"))),{elementOffsetX:a,elementOffsetY:c,width:l,height:u}}({elementOffsetX:t,elementOffsetY:n,width:i,height:r,minDistance:l,resizeButtonPosition:a})}({elementOffsetX:t.elementOffsetX,elementOffsetY:t.elementOffsetY,width:t.width,height:t.height,dragType:t.dragType,dragStartItemRect:t.dragStartItemRect,resizeButtonPosition:t.resizeButtonPosition,magnetismLines:e.getUnitedMagnetismLines()})})),(0,f.Z)((0,c.Z)(e),"magnetismPoints",{verticalPoints:[],horizontalPoints:[]}),(0,f.Z)((0,c.Z)(e),"getMagnetismPoints",(function(){return e.magnetismPoints})),(0,f.Z)((0,c.Z)(e),"setMagnetismPoints",(function(t){e.magnetismPoints=t})),(0,f.Z)((0,c.Z)(e),"clearMagnetismPoints",(function(){e.magnetismPoints={verticalPoints:[],horizontalPoints:[]}})),(0,f.Z)((0,c.Z)(e),"drawMagnetismLines",(function(t){var n,i=function(e,t){var n=e.map(rt),i=rt(t),r=[],o=[];return n.forEach((function(e){[Qe.Top,Qe.CenterHorizontal,Qe.Bottom].forEach((function(t){[Qe.Top,Qe.CenterHorizontal,Qe.Bottom].forEach((function(n){ot(i[t],e[n])&&r.push({from:[{y:i[t],x:i.left,sideY:t,sideX:Qe.Left},{y:i[t],x:i.right,sideY:t,sideX:Qe.Right}],to:[{y:e[n],x:e.left,sideY:n,sideX:Qe.Left},{y:e[n],x:e.right,sideY:n,sideX:Qe.Right}],magnetismSide:t})}))})),[Qe.Left,Qe.CenterVertical,Qe.Right].forEach((function(t){[Qe.Left,Qe.CenterVertical,Qe.Right].forEach((function(n){ot(i[t],e[n])&&o.push({from:[{y:i.top,x:i[t],sideY:Qe.Top,sideX:t},{y:i.bottom,x:i[t],sideY:Qe.Bottom,sideX:t}],to:[{y:e.top,x:e[n],sideY:Qe.Top,sideX:n},{y:e.bottom,x:e[n],sideY:Qe.Bottom,sideX:n}],magnetismSide:t})}))}))})),{verticalPoints:o,horizontalPoints:r}}(e.getMagnetismData().elements.initialRects,t);e.setMagnetismPoints(i),null===(n=e.magnetismRef.current)||void 0===n||n.forceUpdate()})),(0,f.Z)((0,c.Z)(e),"clearMagnetismLines",(function(){var t;e.clearMagnetismPoints(),e.clearMagnetismData(),null===(t=e.magnetismRef.current)||void 0===t||t.forceUpdate()})),e}return(0,a.Z)(g,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,p.isEqual)(this.props,e)||!(0,p.isEqual)(this.state,t)}},{key:"componentDidUpdate",value:function(e){this.recalcMagnetismData(e)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"renderChildren",value:function(){var e=this,t=this.props,n=t.children,i=t.selectedSectionId;return m.Children.map(n,(function(t){if(t){var n=t.props.sectionId;if(n){var r=e.getItemProperties(n);return(0,b.jsx)(Je,pt(pt({},r),{},{setItemCellDimensions:e.setItemCellDimensions,getItemCellDimensions:e.getItemCellDimensions,onMouseMove:e.handleMouseMove,saveItemPosition:e.saveItemPosition,onCopy:e.handleCopyItem,onPaste:e.handlePasteItem,initializeMagnetismData:e.initializeMagnetismData,getElementOffsetAndSizeWithMagnetism:e.getElementOffsetAndSizeWithMagnetism,drawMagnetismLines:e.drawMagnetismLines,selectedSectionId:i,gridRef:e.gridRef,children:t}))}}}))}},{key:"render",value:function(){var e=this.props,t=e.mix,n=void 0===t?"":t,i=e.columnGapRaw,r=e.rowGapRaw,o=e.rows,s=e.columns,a=e.needFrame,c=e.isEditingMode,l=void 0===c||c,u=e.isDirectChildSelected,d=e.isTopLevelGridSelected,f={rowGap:(0,oe.I)(r),columnGap:(0,oe.I)(i),gridTemplateColumns:(0,Pe.bc)(s,i),gridTemplateRows:(0,Pe.bc)(o,r)};return(0,b.jsxs)("div",{ref:this.gridRef,className:gt({"need-frame":a}).mix(n)(),style:f,children:[(0,b.jsx)(V,pt(pt({},this.props),{},{isActive:l,isStructureVisible:l||u||d})),this.renderChildren(),(0,b.jsx)(at,{ref:this.magnetismRef,getMagnetismPoints:this.getMagnetismPoints})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.updatedByState?{updatedByState:!1}:{childrenProps:g.getChildrenProps(e)}}}]),g}(m.Component);(0,f.Z)(vt,"getChildrenProps",(function(e){var t={},n=e.bpPropsMap,i=void 0===n?{}:n,r=e.children;return m.Children.forEach(r,(function(e){if(e){var n=e.props.sectionId;t[e.props.sectionId]=i[n]}})),t}));var yt=(0,h.qC)((0,J.$)("LcGrid2"),$.H,(0,ee.K)((function(e,t){var n,i=t.sectionId||(null===(n=t.attrs)||void 0===n?void 0:n["data-section-id"]),r=(0,y.y0)(e),o=r.editingGridId,s=r.bpPropsMap,a=r.currentBreakpoint,c=r.needFrame,l=o===i,u=(0,y.w4)(e),d=u?(0,y.Nk)(e,u):void 0,f=(null==d?void 0:d.parentId)===i,m=!!i&&i===u;return{isEditingMode:l,bpPropsMap:s,currentBreakpoint:a,needFrame:c,isGridSelected:m,isTopLevelGridSelected:t.isTopLevelGrid&&m,isDirectChildSelected:f,selectedSectionId:u}})),(function(e){return function(t){return(0,b.jsx)(e,pt(pt({},t),{},{sectionType:se.bE.LcGrid2,offsetsMix:t.isTopLevelGrid?ht():void 0}))}}),(function(e){return function(t){var n=(0,ne.getStore)().getState().lpc.needFrame,i=t.fixation||{},r=i.enabled,o=i.visibleInEditor,s=i.settings,a=(0,b.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t));if(!r)return a;if(n&&!o)return(0,b.jsx)("div",{className:ft("hidden")(),children:a});var c,l=(null==(c=s)?void 0:c.type)===ct.Fixed?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"--fixed-grid-width":(0,oe.I)(c.width,"100%")},function(e){var t={};if(!e)return t;var n=e.top,i=e.left,r=e.right,o=e.bottom,s=ce(i),a=ce(r),c=ce(n),l=ce(o);return s&&(t["--fixed-grid-margin-left"]=ut(i)),a&&(t["--fixed-grid-margin-right"]=ut(r)),c&&(t["--fixed-grid-margin-top"]=ut(n)),l&&(t["--fixed-grid-margin-bottom"]=ut(o)),t}(c.margins)):{"--fixed-grid-width":"100%"},u=(null==s?void 0:s.type)===ct.Fixed?function(e){if(!e)return{"vertical-center":!1,"horizontal-center":!1,"absolute-center":!1};var t=e.top,n=e.left,i=e.right,r=e.bottom,o=(null==t?void 0:t.unit)===se.fb.Auto&&(null==r?void 0:r.unit)===se.fb.Auto,s=(null==n?void 0:n.unit)===se.fb.Auto&&(null==i?void 0:i.unit)===se.fb.Auto,a=s&&o;return{"vertical-center":!a&&o,"horizontal-center":!a&&s,"absolute-center":a}}(s.margins):"";return(0,b.jsx)("div",{className:ft(u)(),style:l,children:a})}}),Q.W,(function(e){return function(t){var n=(0,ne.getStore)().getState().lpc.needFrame,i=t.link,r=t.isTopLevelGrid,o=t.isPreview,s=(0,b.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)),a=Boolean(!r&&!n&&(null==i?void 0:i.url)),c=m.useCallback((function(e){var t=i||{},r=t.openInNewTab,s=t.url;if(s){var a=e.target,c=e.currentTarget,l=null==a?void 0:a.closest(".".concat(re())),u=null==a?void 0:a.closest("a");if(c===l&&!(l&&u&&l.contains(u))){var d=s.startsWith("#");r||o&&!n&&!d?window.open(s,"_blank"):d||(window.location.href=s)}}}),[i]);if(!a)return s;var l=(i||{}).url,u=null==l?void 0:l.startsWith("#");return(0,b.jsx)("div",{role:"link","data-href":l,tabIndex:0,onClick:c,className:re(),"data-smooth-scroll":Boolean(u),children:s})}}),(0,p.partialRight)(te.V,{noPaddngs:!0,noMargins:!0}))(vt)},25601:function(e,t,n){function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=0;function r(){i&&(clearTimeout(i),i=0)}function o(){var o=this,s=arguments,a=n.leading&&!i;r(),i=setTimeout((function(){i=0,e.apply(o,s)}),t),a&&e.apply(o,s)}return o.cancel=r,o}n.d(t,{D:function(){return i}}),n(68309)}}]);